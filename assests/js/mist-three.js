var camera,scene,renderer,geometry,material,mesh;function init(){for(clock=new THREE.Clock,(renderer=new THREE.WebGLRenderer({canvas:document.querySelector("#myCanvas")})).setPixelRatio(window.devicePixelRatio),renderer.setSize(window.innerWidth,window.innerHeight),scene=new THREE.Scene,(camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1e4)).position.z=1e3,scene.add(camera),geometry=new THREE.CubeGeometry(200,200,200),material=new THREE.MeshLambertMaterial({color:16777215,wireframe:!1}),mesh=new THREE.Mesh(geometry,material),cubeSineDriver=0,THREE.ImageUtils.crossOrigin="",light=new THREE.DirectionalLight(16777215,.5),light.position.set(-1,0,1),scene.add(light),smokeTexture=THREE.ImageUtils.loadTexture("https://s3-us-west-2.amazonaws.com/s.cdpn.io/95637/Smoke-Element.png"),smokeMaterial=new THREE.MeshLambertMaterial({color:16777215,map:smokeTexture,transparent:!0}),smokeGeo=new THREE.PlaneGeometry(300,300),smokeParticles=[],p=0;p<150;p++){var e=new THREE.Mesh(smokeGeo,smokeMaterial);e.position.set(500*Math.random()-250,500*Math.random()-250,1e3*Math.random()-100),e.rotation.z=360*Math.random(),scene.add(e),smokeParticles.push(e)}document.body.appendChild(renderer.domElement)}function animate(){delta=clock.getDelta(),requestAnimationFrame(animate),evolveSmoke(),render()}function evolveSmoke(){for(var e=smokeParticles.length;e--;)smokeParticles[e].rotation.z+=1*delta}function render(){mesh.rotation.x+=.005,mesh.rotation.y+=.01,cubeSineDriver+=.01,mesh.position.z=100+500*Math.sin(cubeSineDriver),renderer.render(scene,camera)}init(),animate();